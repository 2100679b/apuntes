<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ingenier铆a - Mis Apuntes 2.0</title>
    
    <!-- Icono -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22></text></svg>">
    
    <!-- React y ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        slate: { 850: '#1e293b', 900: '#0f172a' }
                    }
                }
            }
        }
    </script>

    <style>
        /* Scrollbar suave */
        ::-webkit-scrollbar { width: 5px; height: 5px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .dark ::-webkit-scrollbar-thumb { background: #475569; }
        
        /* Scrollbar muy delgado para navegaci贸n de semestres */
        .semester-scroll::-webkit-scrollbar { height: 3px; }
        .semester-scroll::-webkit-scrollbar-thumb { background: #9ca3af; border-radius: 10px; }
        .dark .semester-scroll::-webkit-scrollbar-thumb { background: #4b5563; }

        .fade-in { animation: fadeIn 0.2s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(4px); } to { opacity: 1; transform: translateY(0); } }
        
        .iframe-container {
            background-image: radial-gradient(#cbd5e1 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .dark .iframe-container {
            background-image: radial-gradient(#334155 1px, transparent 1px);
        }
    </style>
</head>
<body class="bg-gray-50 text-slate-800 dark:bg-slate-900 dark:text-slate-100 font-sans overflow-hidden transition-colors duration-300">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        // ==========================================
        //  DATOS DEL PLAN DE ESTUDIOS
        // ==========================================
        const PLAN_ESTUDIOS = [
            // Semestre I
            { id: 'algebra', name: '1.- lgebra Superior', semester: 'I' },
            { id: 'calculo1', name: '2.- C谩lculo I', semester: 'I' },
            { id: 'fisica1', name: '3.- F铆sica I', semester: 'I' },
            { id: 'tecnicas', name: '4.- T茅cnicas de Estudio', semester: 'I' },
            { id: 'quimica', name: '5.- Qu铆mica', semester: 'I' },
            { id: 'ingles1', name: '6.- Ingl茅s I', semester: 'I' },
            { id: 'lab-fisica1', name: '7.- Laboratorio de F铆sica I', semester: 'I' },
            { id: 'lab-herra', name: '8.- Laboratorio de Herramientas Computacionales', semester: 'I' },
            { id: 'lab-quimica', name: '9.- Laboratorio de Qu铆mica', semester: 'I' },
            
            // Semestre II
            { id: 'calculo2', name: '1.- C谩lculo II', semester: 'II' },
            { id: 'fisica2', name: '2.- F铆sica II', semester: 'II' },
            { id: 'progra', name: '3.- Programaci贸n de Computadoras', semester: 'II' },
            { id: 'electronica1', name: '4.- Electr贸nica Anal贸gica I', semester: 'II' },
            { id: 'logica', name: '5.- L贸gica', semester: 'II' },
            { id: 'ingles2', name: '6.- Ingl茅s II', semester: 'II' },
            { id: 'lab-fisica2', name: '7.- Laboratorio de F铆sica II', semester: 'II' },
            { id: 'lab-progra', name: '8.- Laboratorio de Programaci贸n de Computadoras', semester: 'II' },
            { id: 'lab-electronica1', name: '9.- Laboratorio de Electr贸nica Anal贸gica I', semester: 'II' },

            // Semestre III
            { id: 'calculo3', name: '1.- C谩lculo III', semester: 'III' },
            { id: 'teoria-electro', name: '2.- Teor铆a Electromagn茅tica I', semester: 'III' },
            { id: 'metodos', name: '3.- M茅todos Num茅ricos', semester: 'III' },
            { id: 'electronica2', name: '4.- Electr贸nica Anal贸gica II', semester: 'III' },
            { id: 'termo', name: '5.- Termodin谩mica', semester: 'III' },
            { id: 'ingles3', name: '6.- Ingl茅s III', semester: 'III' },
            { id: 'lab-teoria', name: '7.- Laboratorio de Teor铆a Electromagn茅tica I', semester: 'III' },
            { id: 'lab-electronica2', name: '8.- Laboratorio de Electr贸nica Anal贸gica II', semester: 'III' },
            { id: 'lab-termo', name: '9.- Laboratorio de Termodin谩mica', semester: 'III' },

            // Semestre IV
            { id: 'calculo4', name: '1.- C谩lculo IV', semester: 'IV' },
            { id: 'circuitos1', name: '2.- Circuitos El茅ctricos I', semester: 'IV' },
            { id: 'discretas', name: '3.- Matem谩ticas Discretas', semester: 'IV' },
            { id: 'digital1', name: '4.- Electr贸nica Digital I', semester: 'IV' },
            { id: 'estructuras', name: '5.- Estructuras de Datos', semester: 'IV' },
            { id: 'ing-prog', name: '6.- Ingenier铆a de Programaci贸n', semester: 'IV' },
            { id: 'ingles4', name: '7.- Ingl茅s IV', semester: 'IV' },
            { id: 'lab-digital1', name: '8.- Laboratorio de Electr贸nica Digital I', semester: 'IV' },

            // Semestre V
            { id: 'lineal', name: '1.- lgebra Lineal', semester: 'V' },
            { id: 'algoritmos', name: '2.- An谩lisis de Algoritmos', semester: 'V' },
            { id: 'paradigmas', name: '3.- Paradigmas de Programaci贸n', semester: 'V' },
            { id: 'proba', name: '4.- Probabilidad y Estad铆stica', semester: 'V' },
            { id: 'control1', name: '5.- Control Anal贸gico I', semester: 'V' },
            { id: 'lenguajes', name: '6.- Lenguajes Formales y Aut贸matas', semester: 'V' },
            { id: 'lab-paradigmas', name: '7.- Laboratorio de Paradigmas de Programaci贸n', semester: 'V' },
            { id: 'lab-control1', name: '8.- Laboratorio de Control Anal贸gico I', semester: 'V' },

            // Semestre VI
            { id: 'graficacion', name: '1.- Graficaci贸n', semester: 'VI' },
            { id: 'org-comp', name: '2.- Organizaci贸n de Computadoras', semester: 'VI' },
            { id: 'compiladores', name: '3.- Compiladores', semester: 'VI' },
            { id: 'control2', name: '4.- Control Anal贸gico II', semester: 'VI' },
            { id: 'comms1', name: '5.- Comunicaciones I', semester: 'VI' },
            { id: 'economia', name: '6.- Econom铆a', semester: 'VI' },
            { id: 'lab-control2', name: '7.- Laboratorio de Control Anal贸gico II', semester: 'VI' },
            { id: 'lab-comms', name: '8.- Laboratorio de Comunicaciones', semester: 'VI' },
            { id: 'lab-graf', name: '9.- Laboratorio de Graficaci贸n', semester: 'VI' },

            // Semestre VII
            { id: 'teoria-comp', name: '1.- Teor铆a de la Computaci贸n', semester: 'VII' },
            { id: 'inv-op', name: '2.- Investigaci贸n de Operaciones', semester: 'VII' },
            { id: 'bd', name: '3.- Bases de Datos', semester: 'VII' },
            { id: 'redes', name: '4.- Redes de Computadoras', semester: 'VII' },
            { id: 'temas7', name: '5.- Tema Selecto', semester: 'VII' },
            { id: 'lab-redes', name: '6.- Laboratorio de Redes de Computadoras', semester: 'VII' },
            { id: 'lab-bd', name: '7.- Laboratorio de Bases de Datos', semester: 'VII' },

            // Semestre VIII
            { id: 'modelos', name: '1.- Modelos Probabilistas', semester: 'VIII' },
            { id: 'control-dig1', name: '2.- Control Digital I', semester: 'VIII' },
            { id: 'so', name: '3.- Sistemas Operativos', semester: 'VIII' },
            { id: 'admin', name: '4.- Administraci贸n', semester: 'VIII' },
            { id: 'etica', name: '5.- tica Profesional', semester: 'VIII' },
            { id: 'temas8', name: '6.- Tema Selecto', semester: 'VIII' },
            { id: 'lab-control-dig1', name: '7.- Laboratorio de Control Digital I', semester: 'VIII' },
            { id: 'lab-so', name: '8.- Laboratorio de Sistemas Operativos', semester: 'VIII' },
            { id: 'lab-temas8', name: '9.- Laboratorio de Tema Selecto', semester: 'VIII' },

            // Semestre IX
            { id: 'expresion', name: '1.- Expresi贸n Oral y Escrita', semester: 'IX' },
            { id: 'contabilidad', name: '2.- Contabilidad', semester: 'IX' },
            { id: 'temas9-1', name: '3.- Tema Selecto', semester: 'IX' },
            { id: 'temas9-2', name: '4.- Tema Selecto', semester: 'IX' },
            { id: 'temas9-3', name: '5.- Tema Selecto', semester: 'IX' },
            { id: 'lab-temas9', name: '6.- Laboratorio de Tema Selecto', semester: 'IX' },
            { id: 'ia', name: '7.- Inteligencia Artificial', semester: 'IX' },
            { id: 'lab-ia', name: '8.- Laboratorio de Inteligencia Artificial', semester: 'IX' },

            // Semestre X
            { id: 'tesis', name: '1.- Seminario de Tesis', semester: 'X' },
        ];

        // ==========================================
        //  RECURSOS GLOBALES
        // ==========================================
        const RECURSOS_GENERALES = [
            { id: 'plan-estudios-global', title: 'Plan de Estudios Completo', pdfUrl: './pdfs/plan_general.pdf', icon: 'GraduationCap' },
            { id: 'formulas-mate', title: 'Formulario de Matem谩ticas', pdfUrl: './pdfs/formulas_mate.pdf', icon: 'Sigma' },
            { id: 'formulas-fisica', title: 'Formulario de F铆sica', pdfUrl: './pdfs/formulas_fisica.pdf', icon: 'Zap' },
            { id: 'consejos-estudio', title: 'Consejos para Ex谩menes', pdfUrl: './pdfs/consejos.pdf', icon: 'Lightbulb' },
            { id: 'ejercicios-resueltos', title: 'Ejercicios Resueltos (Varios)', pdfUrl: './pdfs/ejercicios.pdf', icon: 'CheckCircle' },
        ];

        const CUSTOM_PDFS = {
            // Se asume que estos archivos existen en la carpeta ./pdfs/
            // Si no existen, el iframe mostrar谩 error o p谩gina en blanco
        };
        
        const MIS_DOCUMENTOS = [];
        
        PLAN_ESTUDIOS.forEach(subject => {
            const customPdf = CUSTOM_PDFS[subject.id] || {};
            MIS_DOCUMENTOS.push({
                id: `doc-${subject.id}`,
                subjectId: subject.id,
                title: `Apuntes - ${subject.name}`,
                pdfUrl: `./pdfs/${customPdf.apuntes || subject.id + '_apuntes.pdf'}`,
                type: 'apuntes'
            });
            
            for (let i = 1; i <= 4; i++) {
                MIS_DOCUMENTOS.push({
                    id: `ex-${subject.id}-p${i}`,
                    subjectId: subject.id,
                    title: `Parcial ${i} - ${subject.name}`,
                    pdfUrl: `./pdfs/${customPdf['p' + i] || subject.id + '_p' + i + '.pdf'}`,
                    type: 'examen',
                    parcial: i
                });
            }
        });

        // A帽adir los recursos generales a la lista de documentos para que el visor los reconozca
        RECURSOS_GENERALES.forEach(res => {
            MIS_DOCUMENTOS.push({
                id: res.id,
                title: res.title,
                pdfUrl: res.pdfUrl,
                type: 'recurso-general'
            });
        });

        // --- Iconos ---
        const Icon = ({ path, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {path}
            </svg>
        );

        const Icons = {
            Rocket: (props) => <Icon {...props} path={<><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"/><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/><path d="m2 22 3-3"/><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/></>} />,
            Search: (props) => <Icon {...props} path={<><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></>} />,
            FileText: (props) => <Icon {...props} path={<><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/></>} />,
            Menu: (props) => <Icon {...props} path={<><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></>} />,
            Moon: (props) => <Icon {...props} path={<><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></>} />,
            Sun: (props) => <Icon {...props} path={<><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/></>} />,
            ChevronDown: (props) => <Icon {...props} path={<><path d="m6 9 6 6 6-6"/></>} />,
            ChevronRight: (props) => <Icon {...props} path={<><path d="m9 18 6-6-6-6"/></>} />,
            Lock: (props) => <Icon {...props} path={<><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></>} />,
            X: (props) => <Icon {...props} path={<><path d="M18 6 6 18"/><path d="m6 6 12 12"/></>} />,
            BookOpen: (props) => <Icon {...props} path={<><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></>} />,
            GraduationCap: (props) => <Icon {...props} path={<><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></>} />,
            Sigma: (props) => <Icon {...props} path={<><path d="M18 7V4H6l10 8-10 8h12v-3"/></>} />,
            Zap: (props) => <Icon {...props} path={<><path d="M13 2 L3 14h9l-1 8 10-12h-9l1-8z"/></>} />,
            Lightbulb: (props) => <Icon {...props} path={<><path d="M15 14c.2 0 .3.1.3.3l.4 2.7c0 .3-.2.5-.5.5H8.8c-.3 0-.5-.2-.5-.5l.4-2.7c0-.2.1-.3.3-.3h6z"/><path d="M9 18h6"/><path d="M10 22h4"/><path d="M12 2a7 7 0 0 0-7 7c0 2.3 1 4.3 2.7 5.7h8.6C18 13.3 19 11.3 19 9a7 7 0 0 0-7-7z"/></>} />,
            CheckCircle: (props) => <Icon {...props} path={<><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></>} />,
            LayoutGrid: (props) => <Icon {...props} path={<><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></>} />,
        };

        const SUBJECT_COLORS = [
            { bg: 'bg-blue-100 dark:bg-blue-900/30', text: 'text-blue-700 dark:text-blue-300' },
            { bg: 'bg-emerald-100 dark:bg-emerald-900/30', text: 'text-emerald-700 dark:text-emerald-300' },
            { bg: 'bg-orange-100 dark:bg-orange-900/30', text: 'text-orange-700 dark:text-orange-300' },
            { bg: 'bg-purple-100 dark:bg-purple-900/30', text: 'text-purple-700 dark:text-purple-300' },
            { bg: 'bg-pink-100 dark:bg-pink-900/30', text: 'text-pink-700 dark:text-pink-300' },
            { bg: 'bg-cyan-100 dark:bg-cyan-900/30', text: 'text-cyan-700 dark:text-cyan-300' },
        ];

        const SEMESTERS = ['I', 'II', 'III', 'IV', 'V', 'VI', 'VII', 'VIII', 'IX', 'X'];

        function App() {
            const [currentSemester, setCurrentSemester] = useState('I');
            const [selectedNoteId, setSelectedNoteId] = useState(null);
            const [isSidebarOpen, setIsSidebarOpen] = useState(true);
            const [searchTerm, setSearchTerm] = useState('');
            const [darkMode, setDarkMode] = useState(() => localStorage.getItem('theme') === 'dark');
            const [expandedSubjects, setExpandedSubjects] = useState({});
            const [activeTab, setActiveTab] = useState('materias'); // 'materias' | 'plan' | 'recursos'

            useEffect(() => {
                document.documentElement.classList.toggle('dark', darkMode);
                localStorage.setItem('theme', darkMode ? 'dark' : 'light');
            }, [darkMode]);

            const visibleSubjects = useMemo(() => {
                return PLAN_ESTUDIOS
                    .filter(s => s.semester === currentSemester)
                    .map((s, i) => ({ ...s, color: SUBJECT_COLORS[i % SUBJECT_COLORS.length] }))
                    .filter(s => s.name.toLowerCase().includes(searchTerm.toLowerCase()));
            }, [currentSemester, searchTerm]);

            const toggleExpand = (id) => {
                setExpandedSubjects(prev => ({ ...prev, [id]: !prev[id] }));
            };

            const activeNoteData = MIS_DOCUMENTOS.find(n => n.id === selectedNoteId);

            return (
                <div className="flex h-screen bg-white dark:bg-slate-900 transition-colors">
                    
                    {/* SIDEBAR */}
                    <aside className={`fixed inset-y-0 left-0 z-40 w-80 bg-gray-50 dark:bg-slate-850 border-r border-gray-200 dark:border-slate-700 transition-transform md:relative md:translate-x-0 ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full'}`}>
                        <div className="flex flex-col h-full">
                            
                            {/* Header Sidebar */}
                            <div className="p-6 border-b border-gray-200 dark:border-slate-700">
                                <div className="flex items-center justify-between mb-6">
                                    <div className="flex items-center space-x-2 text-indigo-600 dark:text-indigo-400 font-bold text-xl">
                                        <Icons.Rocket className="w-6 h-6" />
                                        <span>Ingenier铆a 2.0</span>
                                    </div>
                                    <button onClick={() => setDarkMode(!darkMode)} className="p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors">
                                        {darkMode ? <Icons.Sun className="w-5 h-5" /> : <Icons.Moon className="w-5 h-5" />}
                                    </button>
                                </div>

                                {/* NAVEGACIN PRINCIPAL (LOS BOTONES SOLICITADOS) */}
                                <div className="grid grid-cols-3 gap-1 mb-6 bg-gray-200 dark:bg-slate-800 p-1 rounded-xl">
                                    <button 
                                        onClick={() => setActiveTab('materias')}
                                        className={`flex flex-col items-center justify-center py-2 px-1 rounded-lg transition-all ${activeTab === 'materias' ? 'bg-white dark:bg-slate-700 shadow-sm text-indigo-600 dark:text-white' : 'text-gray-500 hover:bg-gray-100 dark:hover:bg-slate-700/50'}`}
                                    >
                                        <Icons.LayoutGrid className="w-4 h-4 mb-1" />
                                        <span className="text-[9px] font-bold uppercase">Materias</span>
                                    </button>
                                    <button 
                                        onClick={() => {
                                            setActiveTab('plan');
                                            setSelectedNoteId('plan-estudios-global');
                                        }}
                                        className={`flex flex-col items-center justify-center py-2 px-1 rounded-lg transition-all ${activeTab === 'plan' ? 'bg-white dark:bg-slate-700 shadow-sm text-indigo-600 dark:text-white' : 'text-gray-500 hover:bg-gray-100 dark:hover:bg-slate-700/50'}`}
                                    >
                                        <Icons.GraduationCap className="w-4 h-4 mb-1" />
                                        <span className="text-[9px] font-bold uppercase">Mi Plan</span>
                                    </button>
                                    <button 
                                        onClick={() => setActiveTab('recursos')}
                                        className={`flex flex-col items-center justify-center py-2 px-1 rounded-lg transition-all ${activeTab === 'recursos' ? 'bg-white dark:bg-slate-700 shadow-sm text-indigo-600 dark:text-white' : 'text-gray-500 hover:bg-gray-100 dark:hover:bg-slate-700/50'}`}
                                    >
                                        <Icons.Sigma className="w-4 h-4 mb-1" />
                                        <span className="text-[9px] font-bold uppercase">Recursos</span>
                                    </button>
                                </div>

                                {activeTab === 'materias' && (
                                    <div className="fade-in">
                                        <div className="semester-scroll flex space-x-1 overflow-x-auto mb-4 bg-gray-200 dark:bg-slate-800 p-1 rounded-xl" style={{scrollbarWidth: 'thin'}}>
                                            {SEMESTERS.map(sem => (
                                                <button 
                                                    key={sem}
                                                    onClick={() => setCurrentSemester(sem)}
                                                    className={`px-3 py-1.5 rounded-lg text-xs font-bold transition-all flex-shrink-0 ${currentSemester === sem ? 'bg-white dark:bg-slate-600 text-indigo-600 dark:text-white shadow-sm' : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'}`}
                                                >
                                                    {sem}
                                                </button>
                                            ))}
                                        </div>

                                        <div className="relative">
                                            <Icons.Search className="absolute left-3 top-2.5 w-4 h-4 text-gray-400" />
                                            <input 
                                                type="text" 
                                                placeholder="Filtrar materia..."
                                                className="w-full pl-9 pr-4 py-2 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-500 transition-all"
                                                value={searchTerm}
                                                onChange={(e) => setSearchTerm(e.target.value)}
                                            />
                                        </div>
                                    </div>
                                )}
                            </div>

                            {/* CONTENIDO DINMICO SEGN PESTAA */}
                            <div className="flex-1 overflow-y-auto p-4 space-y-2 custom-scrollbar">
                                {activeTab === 'materias' && (
                                    <div className="fade-in space-y-2">
                                        <h3 className="px-2 text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2">Materias - Semestre {currentSemester}</h3>
                                        {visibleSubjects.length === 0 ? (
                                            <p className="text-center text-xs text-gray-400 py-10 italic">No hay resultados.</p>
                                        ) : (
                                            visibleSubjects.map(subject => {
                                                const isExp = expandedSubjects[subject.id];
                                                const subjectDocs = MIS_DOCUMENTOS.filter(d => d.subjectId === subject.id);
                                                const notes = subjectDocs.filter(d => d.type === 'apuntes');
                                                const exams = subjectDocs.filter(d => d.type === 'examen');

                                                return (
                                                    <div key={subject.id} className="group">
                                                        <button 
                                                            onClick={() => toggleExpand(subject.id)}
                                                            className={`w-full flex items-center justify-between p-3 rounded-xl transition-all ${isExp ? 'bg-indigo-50 dark:bg-indigo-900/20' : 'hover:bg-gray-100 dark:hover:bg-slate-800'}`}
                                                        >
                                                            <div className="flex items-center space-x-3 overflow-hidden">
                                                                <div className={`w-2 h-2 rounded-full flex-shrink-0 ${subject.color.bg.split(' ')[0]}`}></div>
                                                                <span className={`text-sm font-medium truncate ${isExp ? 'text-indigo-700 dark:text-indigo-300' : 'text-slate-600 dark:text-slate-400'}`}>
                                                                    {subject.name}
                                                                </span>
                                                            </div>
                                                            {isExp ? <Icons.ChevronDown className="w-4 h-4 opacity-50" /> : <Icons.ChevronRight className="w-4 h-4 opacity-50" />}
                                                        </button>

                                                        {isExp && (
                                                            <div className="ml-4 mt-1 space-y-1 border-l-2 border-indigo-100 dark:border-indigo-900/30 pl-3 fade-in">
                                                                <div>
                                                                    <div className="text-[9px] font-bold text-gray-400 uppercase tracking-wider p-1">Documentos</div>
                                                                    {notes.map(note => (
                                                                        <button 
                                                                            key={note.id}
                                                                            onClick={() => setSelectedNoteId(note.id)}
                                                                            className={`w-full text-left p-2 rounded-lg text-xs flex items-center space-x-2 transition-colors ${selectedNoteId === note.id ? 'bg-indigo-600 text-white shadow-md' : 'text-slate-500 dark:text-slate-400 hover:bg-white dark:hover:bg-slate-700'}`}
                                                                        >
                                                                            <Icons.FileText className="w-3.5 h-3.5 shrink-0" />
                                                                            <span className="truncate">{note.title}</span>
                                                                        </button>
                                                                    ))}
                                                                </div>
                                                                <div className="mt-2">
                                                                    <div className="text-[9px] font-bold text-gray-400 uppercase tracking-wider p-1">Ex谩menes</div>
                                                                    {[1, 2, 3, 4].map(pNum => {
                                                                        const exam = exams.find(e => e.parcial === pNum);
                                                                        return (
                                                                            <button 
                                                                                key={pNum}
                                                                                disabled={!exam}
                                                                                onClick={() => exam && setSelectedNoteId(exam.id)}
                                                                                className={`w-full text-left p-2 rounded-lg text-[11px] flex items-center justify-between transition-all ${
                                                                                    exam 
                                                                                    ? selectedNoteId === exam.id 
                                                                                        ? 'bg-rose-500 text-white font-bold' 
                                                                                        : 'text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-700' 
                                                                                    : 'text-gray-300 dark:text-slate-600 cursor-not-allowed italic opacity-50'
                                                                                }`}
                                                                            >
                                                                                <div className="flex items-center space-x-2 truncate">
                                                                                    <span className={`w-1.5 h-1.5 rounded-full ${exam ? 'bg-rose-400' : 'bg-gray-200 dark:bg-slate-700'}`}></span>
                                                                                    <span className="truncate">Parcial {pNum}</span>
                                                                                </div>
                                                                                {!exam ? <Icons.Lock className="w-3 h-3" /> : <span className="text-[8px] font-bold">PDF</span>}
                                                                            </button>
                                                                        );
                                                                    })}
                                                                </div>
                                                            </div>
                                                        )}
                                                    </div>
                                                );
                                            })
                                        )}
                                    </div>
                                )}

                                {activeTab === 'plan' && (
                                    <div className="fade-in p-2">
                                        <h3 className="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-4">Plan de Estudios</h3>
                                        <div className="space-y-3">
                                            {RECURSOS_GENERALES.filter(r => r.id.includes('plan')).map(res => (
                                                <button 
                                                    key={res.id}
                                                    onClick={() => setSelectedNoteId(res.id)}
                                                    className={`w-full text-left p-4 rounded-2xl flex items-center space-x-4 transition-all ${selectedNoteId === res.id ? 'bg-indigo-600 text-white shadow-lg' : 'bg-white dark:bg-slate-800 border border-gray-100 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-indigo-700'}`}
                                                >
                                                    <div className={`p-2 rounded-xl ${selectedNoteId === res.id ? 'bg-indigo-500 text-white' : 'bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400'}`}>
                                                        <Icons.GraduationCap className="w-6 h-6" />
                                                    </div>
                                                    <div>
                                                        <div className="text-sm font-bold truncate">{res.title}</div>
                                                        <div className={`text-[10px] uppercase font-bold ${selectedNoteId === res.id ? 'text-indigo-100' : 'text-gray-400'}`}>Consultar oficial</div>
                                                    </div>
                                                </button>
                                            ))}
                                            <div className="mt-6 p-4 rounded-2xl bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-900/40">
                                                <h4 className="text-xs font-bold text-indigo-700 dark:text-indigo-300 mb-2 flex items-center">
                                                    <Icons.Lightbulb className="w-4 h-4 mr-2" />
                                                    Resumen Acad茅mico
                                                </h4>
                                                <ul className="text-[11px] text-indigo-600/80 dark:text-indigo-300/60 space-y-1 list-disc ml-4">
                                                    <li>10 Semestres totales</li>
                                                    <li>Acreditaci贸n por cr茅ditos</li>
                                                    <li>4 Niveles de Ingl茅s requeridos</li>
                                                    <li>Pr谩cticas a partir de 7mo semestre</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {activeTab === 'recursos' && (
                                    <div className="fade-in p-2">
                                        <h3 className="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-4">F贸rmulas y Gu铆as</h3>
                                        <div className="space-y-2">
                                            {RECURSOS_GENERALES.filter(r => !r.id.includes('plan')).map(res => {
                                                const TargetIcon = Icons[res.icon] || Icons.FileText;
                                                return (
                                                    <button 
                                                        key={res.id}
                                                        onClick={() => setSelectedNoteId(res.id)}
                                                        className={`w-full text-left p-3 rounded-xl flex items-center space-x-3 transition-all ${selectedNoteId === res.id ? 'bg-indigo-600 text-white' : 'hover:bg-gray-100 dark:hover:bg-slate-800 border border-transparent dark:border-transparent'}`}
                                                    >
                                                        <TargetIcon className={`w-5 h-5 shrink-0 ${selectedNoteId === res.id ? 'text-white' : 'text-indigo-500'}`} />
                                                        <span className="text-sm font-medium truncate">{res.title}</span>
                                                    </button>
                                                );
                                            })}
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    </aside>

                    {/* MAIN VIEW */}
                    <main className="flex-1 flex flex-col min-w-0 relative">
                        {/* Mobile Toggle */}
                        <button 
                            onClick={() => setIsSidebarOpen(!isSidebarOpen)}
                            className="md:hidden absolute top-4 left-4 z-50 p-2 bg-indigo-600 text-white rounded-lg shadow-lg"
                        >
                            <Icons.Menu className="w-5 h-5" />
                        </button>

                        {activeNoteData ? (
                            <div className="flex flex-col h-full bg-gray-100 dark:bg-slate-950">
                                <header className="h-16 bg-white dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700 flex items-center justify-between px-6 shrink-0">
                                    <div className="flex flex-col ml-12 md:ml-0 truncate">
                                        <span className="text-[10px] uppercase font-bold text-gray-400">
                                            {activeNoteData.type === 'recurso-general' ? 'Recurso General' : `Semestre ${currentSemester}`}
                                        </span>
                                        <h2 className="text-sm font-bold text-slate-800 dark:text-white truncate">{activeNoteData.title}</h2>
                                    </div>
                                    <div className="flex items-center space-x-3">
                                        <a href={activeNoteData.pdfUrl} target="_blank" className="px-4 py-2 bg-indigo-600 text-white text-xs font-bold rounded-xl hover:bg-indigo-700 transition-all shadow-md">
                                            Descargar
                                        </a>
                                        <button onClick={() => setSelectedNoteId(null)} className="p-2 text-gray-400 hover:text-gray-600 dark:hover:text-white transition-colors">
                                            <Icons.X className="w-5 h-5" />
                                        </button>
                                    </div>
                                </header>
                                <div className="flex-1 iframe-container p-4 md:p-8 overflow-hidden">
                                    <iframe 
                                        src={activeNoteData.pdfUrl} 
                                        className="w-full h-full rounded-2xl border-none shadow-2xl bg-white"
                                        title="Visor"
                                    />
                                </div>
                            </div>
                        ) : (
                            <div className="flex-1 flex flex-col items-center justify-center p-12 text-center bg-gray-50 dark:bg-slate-900 transition-all">
                                <div className="max-w-lg">
                                    <div className="w-24 h-24 bg-white dark:bg-slate-800 rounded-3xl flex items-center justify-center mb-8 shadow-xl mx-auto rotate-2">
                                        <Icons.BookOpen className="w-12 h-12 text-indigo-500" />
                                    </div>
                                    <h1 className="text-3xl font-black text-slate-800 dark:text-white mb-4">Gestor de Ingenier铆a</h1>
                                    <p className="text-slate-500 dark:text-slate-400 leading-relaxed mb-8">
                                        Selecciona una opci贸n en el men煤 lateral. Ahora puedes consultar el <b>Plan de Estudios</b> oficial o acceder a la secci贸n de <b>F贸rmulas y Recursos</b> para potenciar tu estudio.
                                    </p>
                                    <div className="grid grid-cols-2 gap-4">
                                        <button 
                                            onClick={() => { setActiveTab('plan'); setSelectedNoteId('plan-estudios-global'); }}
                                            className="p-5 bg-white dark:bg-slate-800 rounded-2xl border border-gray-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all text-left"
                                        >
                                            <Icons.GraduationCap className="w-6 h-6 text-indigo-600 mb-2" />
                                            <span className="text-[10px] text-gray-400 uppercase font-bold block">Acceso R谩pido</span>
                                            <span className="block text-sm font-bold text-slate-700 dark:text-white">Plan de Estudios</span>
                                        </button>
                                        <button 
                                            onClick={() => setActiveTab('recursos')}
                                            className="p-5 bg-white dark:bg-slate-800 rounded-2xl border border-gray-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all text-left"
                                        >
                                            <Icons.Sigma className="w-6 h-6 text-rose-500 mb-2" />
                                            <span className="text-[10px] text-gray-400 uppercase font-bold block">Herramientas</span>
                                            <span className="block text-sm font-bold text-slate-700 dark:text-white">F贸rmulas y Consejos</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>